<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="index.css" type="text/css" rel="stylesheet">
    <link href="styles/gameContainer.css" type="text/css" rel="stylesheet">
    <link href="styles/hangmanContainer.css" type="text/css" rel="stylesheet">
    <title>Hangman!</title>
</head>

<body>
    <div class="home-container">
        <div class="game-modal">
            <div class="game-modal-title">
                <h1>Enter or Create a Room</h1>
            </div>

            <section class="game-modal-join" style="display: none">
                <h2>Room Code</h2>
                <input type="text" class="room-code" id="game-name-join">
                <button name="button" class="game-modal-submit" type="button" onclick="gameCreationJoin()">Join</button>
            </section>

            <section class="game-modal-create" style="display: none;">
                <h2>Game Name</h2>
                <input type="text" class="text-box-modal-format" id="game-name-create">
                <h2>Player Count</h2>
                <input type="text" class="text-box-modal-format" id="player-count">
                <button class="game-modal-submit" type="button" onclick="gameCreationSubmit()">Submit</button>
            </section>

            <section class="game-modal-selection">
                <button class="game-modal-create-option" type="button"
                    onclick="setCreateModalVisible(true)">Create</button>
                <button class="game-modal-join-option" type="button" onclick="setJoinModalVisible(true)">Join</button>
            </section>

            <div class="button-container">
                <button class="back-to-selection" type="button" onclick="setSelectionPanelVisible(true)">Back</button>
            </div>
        </div>
    </div>

    <div class="game-container">
        <div class="hangman-container">
            <!-- TODO: swap to SVG -->
            <canvas class="hangman-canvas"></canvas>
        </div>
        <div class="word-status">
            <!-- This is dyanmically generated based on the setWordToGuess function -->
        </div>
        <div class="keyboard">
            <div class="keys">  
                <!-- This is dyanmically generated at runtime. -->
            </div>
        </div>
    </div>
    
    <script src="game_logic/game.js"></script>
    <script src="dom/game.js"></script>
    <script src="dom/gameCreation.js"></script>
    <script src="dom/domMediator.js"></script>
    <script src="api/rest.js"></script>
    <script src="api/ws.js"></script>

    <script>

        let gameCreate = undefined;
        let gameJoin = undefined;
        let selectionPanel = undefined;
        let backButton = undefined;
        let gameContainer = undefined;
        function setSelectionPanelVisible(display) {
            const show = display !== undefined && display;
            selectionPanel.setVisible(show);
            gameJoin.setVisible(!show);
            gameCreate.setVisible(!show);
            backButton.setVisible(!show);
        }

        function setCreateModalVisible(display) {
            const show = display !== undefined && display;
            setSelectionPanelVisible(!show);
            gameJoin.setVisible(!show);
            gameCreate.setVisible(show);

            backButton.setVisible(show);
        }

        function setJoinModalVisible(display) {
            const show = display !== undefined && display;
            setSelectionPanelVisible(!show);
            gameJoin.setVisible(show);
            gameCreate.setVisible(!show);
            backButton.setVisible(show);
        }

        Element.prototype.setVisible = function (show) {
            this.style.display = show ? "" : "none";
        }
        
        window.onload = () => {
            gameCreate = document.getElementsByClassName("game-modal-create")[0];
            gameJoin = document.getElementsByClassName("game-modal-join")[0];
            selectionPanel = document.getElementsByClassName("game-modal-selection")[0];
            backButton = document.getElementsByClassName("back-to-selection")[0];
            gameContainer = document.getElementsByClassName("game-container")[0];
            backButton.setVisible(false);
            gameContainer.setVisible(false);
            // setWordToGuess(getWordState());
            // generateKeys();
        }
    </script>
</body>

</html>